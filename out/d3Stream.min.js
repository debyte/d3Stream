!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a){e.call(this,a),this.displays=[]}b.exports=d;var e=(a("./utility.js"),a("./StreamTransform.js")),f=a("./display/Display.js");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.load=function(a,b){function c(a,c){if(a)throw a;d.update([].concat(c),b)}var d=this,e=b||{};return"csv"==e.format?d3.csv(a,c):"tsv"==e.format?d3.tsv(a,c):"xml"==e.format?d3.xml(a,c):d3.json(a,c),this},d.prototype.display=function(a,b){var c=new f(a,b,this.data);return this.displays.push(c),c},d.prototype.update=function(a,b){var c=b||{};if(a&&(c.append?this.data=this.data.concat(a):c.prepend?this.data=a.concat(this.data):this.data=a),this.displays.length>0)for(var d=this.array(),e=0;e<this.displays.length;e++)this.displays[e].update(d);return this}},{"./StreamTransform.js":3,"./display/Display.js":5,"./utility.js":13}],2:[function(a,b,c){function d(a){this.data=void 0!==a?[].concat(a):[],this.transformations=[]}b.exports=d;var e=a("./utility.js");d.prototype.addTransformation=function(a){return this.transformations.push(a),this.update(),this},d.prototype.reset=function(){return this.transformations=[],this.update(),this},d.prototype.array=function(){return this.data&&this.transformations?e.reduce(this.transformations,function(a,b){return b(a)},this.data):this.data},d.prototype.update=function(){}},{"./utility.js":13}],3:[function(a,b,c){function d(a){f.call(this,a)}b.exports=d;var e=a("./utility.js"),f=a("./StreamBase.js");d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.consoleLog=function(){return this.addTransformation(function(a){return e.consoleLog(a),a})},d.prototype.map=function(a){return this.addTransformation(function(b){return e.map(b,a)})},d.prototype.filter=function(a){return this.addTransformation(function(b){return e.filter(b,a)})},d.prototype.navigate=function(a){return this.addTransformation(function(b){return e.navigate(b[0],a)})},d.prototype.cross=function(a){return this.addTransformation(function(b){return e.cross(b,a)})},d.prototype.repeat=function(a){return this.addTransformation(function(b){return e.repeat(b,a)})},d.prototype.group=function(a){return this.addTransformation(function(b){return e.group(b,a)})},d.prototype.cumulate=function(a){return this.addTransformation(function(b){return e.cumulate(b,a)})},d.prototype.mapAsStreams=function(a){return this.addTransformation(function(b){return e.map(b,function(b,c){var e=a(new d(b),c);return"function"==typeof e.array?e.array():e})})}},{"./StreamBase.js":2,"./utility.js":13}],4:[function(a,b,c){b.exports={height:200,marginTop:10,marginLeft:40,marginRight:30,marginBottom:30,lineDotRange:[3,10],barMargin:.2,bandPadding:.2,combine:!0,transitionDuration:500}},{}],5:[function(a,b,c){function d(a,b,c){e.call(this,a,b,c)}b.exports=d;var e=a("./DisplayFrame.js"),f=a("./lines.js"),g=a("./bars.js");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.scatterPlot=function(a){return this.addChart(f.scatterPlot,a)},d.prototype.lineChart=function(a){return this.addChart(f.lineChart,a)},d.prototype.barChart=function(a){return this.addChart(g.barChart,a)},d.prototype.stackedBarChart=function(a){return this.addChart(g.stackedBarChart,a)},d.prototype.groupedBarChart=function(a){return this.addChart(g.groupedBarChart,a)}},{"./DisplayFrame.js":7,"./bars.js":9,"./lines.js":10}],6:[function(a,b,c){function d(a,b,c){p.call(this,c),this.config=m.assign(o,b),this.display=e(a,this.config),this.size={width:0,height:0,inWidth:0,inHeight:0},this.select=new q(this.config),this.axisCache={},this.charts=[],this.frames=[]}function e(a,b){return jQuery&&a instanceof jQuery&&(a=a[0]),a=d3.select(a),display=a.append("div"),display.classed(n.a(j,b["class"]),!0),display}function f(a,b){var c=b.width||a.node().offsetWidth,d=b.height||a.node().offsetHeight;return{width:c,height:d,inWidth:c-b.marginLeft-b.marginRight,inHeight:d-b.marginTop-b.marginBottom}}function g(a,b,c,d,e,f){var g=[k,d.combine?1:f].join("-"),h=a.select(n.s(g));h.empty()&&(h=a.append("svg").attr("class",g),b.register(h)),h.attr("width",c.width).attr("height",c.height);var i=[l,f,e].join("-"),j=h.select(n.s(i));return j.empty()&&(j=h.append("g").attr("class",i).attr("transform",n.translateMargins(d))),j}function h(a,b,c,d){var e=[k,b.combine?1:d].join("-"),f=a.select(n.s(e));if(f.empty())return!1;if(!b.combine)return f.remove(),!0;var g=[l,d,c].join("-"),h=f.select(n.s(g));return h.empty()?!1:(h.remove(),!0)}b.exports=d;var j="d3stream-display",k="d3stream-svg",l="d3stream-plot",m=a("../utility.js"),n=a("./utility.js"),o=a("../config.js"),p=a("../StreamTransform.js"),q=a("./Select.js");d.prototype=Object.create(p.prototype),d.prototype.constructor=d,d.prototype.update=function(a){void 0!==a&&(this.data=a),this.size=f(this.display,this.config),this.axisCache={};var b=this.array();for(b.length>0&&!Array.isArray(b[0])&&(b=[b]),i=0;i<this.charts.length;i++){for(var c=0;c<b.length;c++){var d=g(this.display,this.select,this.size,this.config,i,c),e=this.charts[i];e[0](this,d,b,c,e[1])}for(;h(this.display,this.config,i,c);)c+=1}for(i=0;i<this.frames.length;i++){var j=this.frames[i];j[0](this,b,j[1])}},d.prototype.addChart=function(a,b){return this.charts.push([a,m.assign(this.config,b)]),this.update(),this},d.prototype.addFrame=function(a,b){return this.frames.push([a,m.assign(this.config,b)]),this.update(),this},d.prototype.axis=function(a,b){function c(a,b){return void 0!==b?this.scale(a[this.variable]):this.scale(a[this.variable])+this.scale.bandwidth()/2}function d(a,b){return b?this.scale(a[this.variable])-b:this.scale(a[this.variable])}if(this.axisCache[b])return this.axisCache[b];var e=this.domain(a,b),f={variable:e.variable||b,domain:e.domain,scale:e.band?d3.scaleBand().domain(e.domain).padding(this.config.bandPadding):d3.scaleLinear().domain(e.domain).nice(),pick:e.band?c:d};return this.axisCache[b]=f,f},d.prototype.domain=function(a,b){return{domain:[0,1]}}},{"../StreamTransform.js":3,"../config.js":4,"../utility.js":13,"./Select.js":8,"./utility.js":11}],7:[function(a,b,c){function d(a,b,c){m.call(this,a,b,c),this.domainFunction={}}function e(a,b){return{domain:d3.extent(d3.merge(a),k.pick(b))}}function f(a,b,c){var d=a.axis(b,c.variable).scale;a.display.selectAll("svg").each(function(){var b=d3.select(this),e=b.select(l.s(h));e.empty()&&(e=b.append("g").attr("class",h)),e.attr("transform",l.translateMargins(c,0,a.size.inHeight)).call(d3.axisBottom(d))})}function g(a,b,c){var d=a.axis(b,c.variable).scale;a.display.selectAll("svg").each(function(){var a=d3.select(this),b=a.select(l.s(i));b.empty()&&(b=a.append("g").attr("class",i)),b.attr("transform",l.translateMargins(c)).call(d3.axisLeft(d))})}b.exports=d;var h="d3stream-axis-x",i="d3stream-axis-y",j="d3stream-labels",k=a("../utility.js"),l=a("./utility.js"),m=a("./DisplayBase.js");d.prototype=Object.create(m.prototype),d.prototype.constructor=d,d.prototype.domain=function(a,b){return this.domainFunction[b]?this.domainFunction[b](a,b):e(a,b)},d.prototype.setDomain=function(a,b){for(var c=0;c<a.length;c++)this.domainFunction[a[c]]=b;return this},d.prototype.domainManual=function(a,b){return this.setDomain(a,function(a,c){return{domain:b}})},d.prototype.domainPad=function(a,b){return Array.isArray(b)||(b=[b,b]),this.setDomain(a,function(a,c){var d=e(a,c).domain;return{domain:[d[0]-b[0],d[1]+b[1]]}})},d.prototype.domainIQR=function(a){return this.setDomain(a,function(a,b){var c=k.map(d3.merge(a),k.pick(b)).sort(),d=c[Math.floor(.25*c.length)],e=c[Math.floor(.75*c.length)],f=e-d;return{domain:[Math.max(d-1.5*f,c[0]),Math.min(e+1.5*f,c[c.length-1])]}})},d.prototype.domainBands=function(a,b,c){return this.setDomain(a,function(a,d){var e=c||null;return e||(e=k.unique(k.map(d3.merge(a),k.pick(b)))),{band:!0,variable:b,domain:e}})},d.prototype.addAxis=function(a,b){return a&&this.addFrame(f,{variable:a}),b&&this.addFrame(g,{variable:b}),this},d.prototype.labels=function(a){return this.addFrame(a,{labels:a})}},{"../utility.js":13,"./DisplayBase.js":6,"./utility.js":11}],8:[function(a,b,c){function d(a){this.config=a,this.svgs=d3.select(),this.selected=[],this.data={}}b.exports=d;var e=a("../utility.js"),f=a("./utility.js"),g="d3stream-focus",h="d3stream-selection",i="d3stream-focus-selection";d.prototype.register=function(a){this.svgs=this.svgs.merge(a)},d.prototype.clear=function(){this.svgs.selectAll(f.s(h)).classed(h,!1),e.empty(this.selected)},d.prototype.event=function(a,b,c,d){switch(a){case"over":this.over(b);break;case"out":this.out(b);break;case"click":this.click(b)}this.config.select&&this.config.select[a]&&this.config.select[a](this,b.__data__)},d.prototype.over=function(a){a.classed(h)?a.classed(i,!0):a.classed(g,!0),d3.select(a.node.parentNode).classed(g,!0).raise()},d.prototype.out=function(a){a.classed(f.a(g,i),!1),d3.select(a.node.parentNode).classed(g,!1)},d.prototype.click=function(a){if(e.isIn(a.node,this.selected)){e.removeFrom(a.node,this.selected),a.classed(f.a(h,i),!1).classed(g,!0);var b=d3.select(a.node.parentNode);b.select(f.s(h)).empty()&&b.classed(h,!1)}else this.selected.push(a.node),a.classed(h,!0),d3.select(a.node.parentNode).classed(h,!0)}},{"../utility.js":13,"./utility.js":11}],9:[function(a,b,c){function d(a,b,c,d,e){var f={x:a.axis(b,e.horizontalVariable||"x"),y:a.axis(b,e.verticalVariable||"y")};return f.x.scale.rangeRound([0,c]),f.y.domain=[Math.min(0,f.y.domain[0]),Math.max(0,f.y.domain[1])],f.y.scale.domain(f.y.domain).rangeRound([d,0]),f}function e(a,b,c,d){if(b.bandwidth)return[b.bandwidth(),0];var e=(1-d.barMargin)*a/c;return[e,e/2]}function f(a,b,c,f,g){var h=a.size.inWidth,i=a.size.inHeight,k=d(a,c,h,i,g),l=c[f],m=e(h,k.x.scale,l.length,g),n=j.transition(g),o=b.selectAll(".desummary-bar").data(l);o.enter().append("rect").attr("class","desummary-bar").attr("x",function(a){return k.x.pick(a,m[1])}).attr("y",k.y.scale(0)).attr("width",m[0]).attr("height",0).on("mouseover",j.event(a.select,"over")).on("mouseout",j.event(a.select,"out")).on("click",j.event(a.select,"click")).merge(o).transition(n).attr("x",function(a){return k.x.pick(a,m[1])}).attr("y",function(a){return k.y.pick(a)}).attr("width",m[0]).attr("height",function(a){return i-k.y.pick(a)}),o.exit().remove()}function g(a,b,c,f,g){var h=a.size.inWidth,k=a.size.inHeight,l=d(a,c,h,k,g),m=c[f],n=e(h,l.x.scale,m.length,g),o=j.transition(g);m=i.reduce(g.reverseStack?m.reverse():m,function(a,b){var c=a.length>0?a[a.length-1].sy[1]:0;return b.sy=[c,c+Math.abs(b[l.y.variable])],a.push(b),a},[]),l.y.domain=[0,d3.max(m,function(a){return a.sy[1]})],l.y.scale.domain(l.y.domain);var p=b.selectAll(".desummary-bar").data(m);p.enter().append("rect").attr("class",function(a){return"desummary-bar desummary-group-"+a[l.x.variable]}).attr("x",function(a){return l.x.pick(a,n[1])}).attr("y",l.y.scale(0)).attr("width",n[0]).attr("height",0).on("mouseover",j.event(a.select,"over")).on("mouseout",j.event(a.select,"out")).on("click",j.event(a.select,"click")).merge(p).transition(o).attr("x",function(a){return l.x.pick(a,n[1])}).attr("y",function(a){return l.y.scale(a.sy[1])}).attr("width",n[0]).attr("height",function(a){return l.y.scale(a.sy[0])-l.y.scale(a.sy[1])}),p.exit().remove()}function h(a,b,c,f,g){var h=a.size.inWidth,k=a.size.inHeight,l=d(a,c,h,k,g),m=c[f],n=e(h,l.x.scale,m.length,g),o=j.transition(g),p=d3.scaleBand().domain(i.map(m,i.pick("x"))).rangeRound([0,n[0]]),q=p.bandwidth(),r=b.selectAll(".desummary-bar").data(m);r.enter().append("rect").attr("class",function(a){return"desummary-bar desummary-bar-"+a[l.x.variable]}).attr("x",function(a){return l.x.pick(a,n[1])+p(a[l.x.variable])}).attr("y",l.y.scale(0)).attr("width",q).attr("height",0).on("mouseover",j.event(a.select,"over")).on("mouseout",j.event(a.select,"out")).on("click",j.event(a.select,"click")).merge(r).transition(o).attr("x",function(a){return l.x.pick(a,n[1])+p(a[l.x.variable])}).attr("y",function(a){return l.y.pick(a)}).attr("width",q).attr("height",function(a){return k-l.y.pick(a)}),r.exit().remove()}var i=a("../utility.js"),j=a("./utility.js");b.exports={barChart:f,stackedBarChart:g,groupedBarChart:h}},{"../utility.js":13,"./utility.js":11}],10:[function(a,b,c){function d(a,b,c,d,e){var f={x:a.axis(b,e.horizontalVariable||"x"),y:a.axis(b,e.verticalVariable||"y"),z:a.axis(b,e.scaleVariable||"z")};return f.x.scale.rangeRound([0,c]),f.y.scale.rangeRound([d,0]),f.z.scale.rangeRound(e.lineDotRange),f}function e(a,b,c,e,f){var i=a.size.inWidth,j=a.size.inHeight,k=d(a,c,i,j,f),l=c[e],m=h.transition(f);l=h.cutToDomain(l,k.z.variable,k.z.domain),g(b,l,m,k,a.select)}function f(a,b,c,e,f){var i=a.size.inWidth,j=a.size.inHeight,k=d(a,c,i,j,f),l=c[e],m=h.transition(f);l=h.cutToDomain(l,k.z.variable,k.z.domain);var n=b.select(".desummary-line");if(n.empty()){var o=d3.line().x(function(a){return k.x.pick(a)}).y(k.y.scale(0));f.curveLine&&o.curve(d3.curveNatural),n=b.append("path").attr("class","desummary-line").attr("d",o(l))}var p=d3.line().x(function(a){return k.x.pick(a)}).y(function(a){return k.y.pick(a)});f.curveLine&&p.curve(d3.curveNatural),n.transition(m).attr("d",p(l)),g(b,l,m,k,a.select)}function g(a,b,c,d,e){var f=a.selectAll(".desummary-line-dot").data(b);f.enter().append("circle").attr("class","desummary-line-dot").attr("cx",function(a){return d.x.pick(a)}).attr("cy",d.y.scale(0)).attr("r",d.z.scale(0)).on("mouseover",h.event(e,"over")).on("mouseout",h.event(e,"out")).on("click",h.event(e,"click")).merge(f).transition(c).attr("cx",function(a){return d.x.pick(a)}).attr("cy",function(a){return d.y.pick(a)}).attr("r",function(a){return d.z.pick(a)}),f.exit().remove()}var h=a("./utility.js");b.exports={scatterPlot:e,lineChart:f}},{"./utility.js":11}],11:[function(a,b,c){function d(a,b){return"translate("+a+","+b+")"}var e=a("../utility.js");b.exports={translate:d,translateMargins:function(a,b,c){return d(a.marginLeft+(b||0),a.marginTop+(c||0))},s:function(a){return".".concat(String(a))},a:function(){return e.filter(arguments,e.isNonEmpty).join(" ")},transition:function(a){return d3.transition().duration(a.transitionDuration)},event:function(a,b){return function(c,d){a.event(b,d3.select(this),c,d)}},cutToDomain:function(a,b,c){function d(a){var c={};return c[b]=a,c}var f=c[0],g=c[1];return e.map(a,function(a){var c=a[b];return c>g?e.assign(a,d(g)):f>c?e.assign(a,d(f)):e.assign(a)})}}},{"../utility.js":13}],12:[function(a,b,c){window.d3Stream=a("./Stream.js")},{"./Stream.js":1}],13:[function(a,b,c){function d(a,b){if("function"==typeof a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d,a));return c}function e(a,b){if("function"==typeof a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}function f(a,b,c){if("function"==typeof a.reduce)return a.reduce(b,c);for(var d=c,e=0;e<a.length;e++)d=b(d,a[e],e,a);return d}function g(a,b){return b.indexOf(a)>=0}function h(a,b){return b.splice(b.indexOf(a),1)}function i(a){if("function"==typeof Object.keys)return Object.keys(a);var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b}function j(a){if("function"==typeof Object.values)return Object.values(a);var b=[];for(var c in i(a))b.push(a[c]);return b}function k(){return f(arguments,function(a,b){for(var c in b)a[c]=b[c];return a},{})}b.exports={map:d,filter:e,reduce:f,isIn:g,removeFrom:h,keys:i,values:j,assign:k,consoleLog:function(a){console.log(a)},toNumber:function(a){return parseFloat(a)},isNotNaN:function(a){return!isNaN(a)},isNonEmpty:function(a){return a&&(void 0===a.trim||""!==a.trim())},empty:function(a){a.splice(0,a.length)},pick:function(a){return function(b){return b[a]}},splitEach:function(a,b){return f(a,function(a,c){return a.concat(c.split(b))},[])},countEach:function(a){return f(a,function(a,b){return a[b]=(a[b]||0)+1,a},{})},navigate:function(a,b){return[].concat(f(b.split("."),function(a,b){return a[b]},a))},repeat:function(a,b){return d(b,function(b){return[a,b]})},cross:function(a,b){return d(a,function(a){return d(b,function(b){return[a,b]})})},unique:function(a){return f(a,function(a,b){return g(b,a)||a.push(b),a},[])},group:function(a,b){var c=f(b,function(a){return a.push([]),a},[]);return f(a,function(a,c){for(var d=0;d<b.length;d++)if(b[d](c))return a[d].push(c),a;return a},c)},cumulate:function(a,b){var c=[].concat(b);return f(a,function(a,b){if(a.length>0)for(var d=0;d<c.length;d++){var e=c[d];b[e]=a[a.length-1][e]+(b[e]||0)}return a.push(b),a},[])}}},{}]},{},[12]);